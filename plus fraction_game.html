<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞: –°–ª–æ–∂–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom, #e0f2fe, #f3e5f5);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-center;
            margin-bottom: 2rem;
        }

        .title {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .score {
            font-size: 1.2rem;
            color: #666;
        }

        .game-board {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .game-content {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 2rem;
            align-items: center;
        }

        @media (max-width: 768px) {
            .game-content {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }
	.back-to-menu-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255,107,107,0.3);
            z-index: 1000;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-to-menu-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255,107,107,0.4);
        }
        .section {
            text-align: center;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #555;
            margin-bottom: 1rem;
        }

        .fraction-container {
            margin-bottom: 1rem;
        }

        .fraction-value {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .square-grid {
            display: inline-grid;
            gap: 2px;
            margin: 0 auto;
        }

        .cell {
            width: 32px;
            height: 32px;
            border: 2px solid #666;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .cell.filled {
            background-color: #2196f3;
        }

        .cell.empty {
            background-color: white;
        }

        .cell.interactive:hover {
            background-color: #bbdefb;
        }

        .operator {
            font-size: 2rem;
            font-weight: bold;
            color: #666;
            margin: 1rem 0;
        }

        .equals {
            font-size: 3rem;
            font-weight: bold;
            color: #666;
        }

        .user-answer {
            color: #2196f3;
        }

        .buttons {
            margin-top: 1.5rem;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .btn-check {
            background-color: #4caf50;
            color: white;
        }

        .btn-check:hover {
            background-color: #45a049;
        }

        .btn-next {
            background-color: #2196f3;
            color: white;
        }

        .btn-next:hover {
            background-color: #1976d2;
        }

        .result {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .result.correct {
            color: #4caf50;
        }

        .result.incorrect {
            color: #f44336;
        }

        .instructions {
            margin-top: 2rem;
            padding: 1rem;
            background-color: #f5f5f5;
            border-radius: 8px;
            text-align: center;
        }

        .instructions p {
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üßÆ –ò–≥—Ä–∞: –°–ª–æ–∂–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π</h1>
            <div class="score">–°—á—ë—Ç: <span id="score">0</span> –∏–∑ <span id="total">0</span></div>
        </div>
	<button class="back-to-menu-button" onclick="goBackToMenu()">
        üè† –ù–∞–∑–∞–¥ –∫ –º–µ–Ω—é
    </button>
        <div class="game-board">
            <div class="game-content">
                <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –ø—Ä–∏–º–µ—Ä -->
                <div class="section">
                    <h3 class="section-title">–ü—Ä–∏–º–µ—Ä:</h3>
                    
                    <!-- –ü–µ—Ä–≤–∞—è –¥—Ä–æ–±—å -->
                    <div class="fraction-container">
                        <div class="fraction-value" id="fraction1-display"></div>
                        <div id="fraction1-square" class="square-grid"></div>
                    </div>

                    <div class="operator">+</div>

                    <!-- –í—Ç–æ—Ä–∞—è –¥—Ä–æ–±—å -->
                    <div class="fraction-container">
                        <div class="fraction-value" id="fraction2-display"></div>
                        <div id="fraction2-square" class="square-grid"></div>
                    </div>
                </div>

                <!-- –ó–Ω–∞–∫ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ -->
                <div class="section">
                    <div class="equals">=</div>
                </div>

                <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <div class="section">
                    <h3 class="section-title">–í–∞—à –æ—Ç–≤–µ—Ç:</h3>
                    
                    <div class="fraction-container">
                        <div class="fraction-value" id="answer-display"></div>
                        <div id="answer-square" class="square-grid"></div>
                    </div>

                    <div class="buttons">
                        <div id="check-section">
                            <button class="btn btn-check" onclick="checkAnswer()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                        </div>
                        
                        <div id="result-section" style="display: none;">
                            <div id="result-text" class="result"></div>
                            <button class="btn btn-next" onclick="nextProblem()">–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
            <div class="instructions">
                <p>üí° <strong>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</strong> –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø—Ä–∏–º–µ—Ä —Å–ª–µ–≤–∞ –∏ –∫–ª–∏–∫–∞–π—Ç–µ –ø–æ –∫–ª–µ—Ç–∫–∞–º —Å–ø—Ä–∞–≤–∞, —á—Ç–æ–±—ã –∑–∞–∫—Ä–∞—Å–∏—Ç—å –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</p>
            </div>
        </div>
    </div>

    <script>
        let currentProblem = null;
        let userAnswer = [];
        let score = 0;
        let totalProblems = 0;
	function goBackToMenu() {
            window.location.href = 'index.html'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–º—è —Ñ–∞–π–ª–∞ –≤–∞—à–µ–≥–æ –º–µ–Ω—é
        }
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –¥—Ä–æ–±–∏
        function simplifyFraction(numerator, denominator) {
            if (numerator === denominator) {
                return { display: "1", isWhole: true, numerator, denominator };
            }
            if (numerator === 0) {
                return { display: "0", isWhole: true, numerator, denominator };
            }
            return { display: `${numerator}/${denominator}`, isWhole: false, numerator, denominator };
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π –∑–∞–¥–∞—á–∏
        function generateProblem() {
            const denominators = [2, 3, 4, 6, 8];
            const denom = denominators[Math.floor(Math.random() * denominators.length)];
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–≤–µ –¥—Ä–æ–±–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–µ–º
            const num1 = Math.floor(Math.random() * (denom - 1)) + 1;
            const num2 = Math.floor(Math.random() * (denom - num1)) + 1;
            
            currentProblem = {
                fraction1: { numerator: num1, denominator: denom },
                fraction2: { numerator: num2, denominator: denom },
                result: { numerator: num1 + num2, denominator: denom }
            };

            userAnswer = [];
            updateDisplay();
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–≤–∞–¥—Ä–∞—Ç–∞
        function renderSquare(container, numerator, denominator, isInteractive = false, filledCells = []) {
            container.innerHTML = '';
            
            const totalCells = denominator;
            let gridCols;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—è
            if (totalCells === 2) {
                gridCols = 2;
            } else if (totalCells === 3) {
                gridCols = 3;
            } else if (totalCells === 4) {
                gridCols = 2;
            } else if (totalCells === 6) {
                gridCols = 3;
            } else if (totalCells === 8) {
                gridCols = 4;
            } else {
                gridCols = Math.ceil(Math.sqrt(totalCells));
            }
            
            container.style.gridTemplateColumns = `repeat(${gridCols}, 1fr)`;

            // –°–æ–∑–¥–∞–µ–º —Ç–æ—á–Ω–æ —Å—Ç–æ–ª—å–∫–æ —è—á–µ–µ–∫, —Å–∫–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–æ –≤ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–µ
            for (let i = 0; i < totalCells; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                
                const isFilled = isInteractive ? filledCells.includes(i) : i < numerator;
                cell.classList.add(isFilled ? 'filled' : 'empty');
                
                if (isInteractive) {
                    cell.classList.add('interactive');
                    cell.onclick = () => toggleCell(i);
                }
                
                container.appendChild(cell);
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è—á–µ–π–∫–∏
        function toggleCell(cellIndex) {
            if (document.getElementById('result-section').style.display !== 'none') return;
            
            if (userAnswer.includes(cellIndex)) {
                userAnswer = userAnswer.filter(i => i !== cellIndex);
            } else {
                userAnswer.push(cellIndex);
            }
            
            updateAnswerDisplay();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function updateDisplay() {
            if (!currentProblem) return;

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π –¥—Ä–æ–±–∏
            document.getElementById('fraction1-display').textContent = 
                simplifyFraction(currentProblem.fraction1.numerator, currentProblem.fraction1.denominator).display;
            renderSquare(
                document.getElementById('fraction1-square'), 
                currentProblem.fraction1.numerator, 
                currentProblem.fraction1.denominator
            );

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–π –¥—Ä–æ–±–∏
            document.getElementById('fraction2-display').textContent = 
                simplifyFraction(currentProblem.fraction2.numerator, currentProblem.fraction2.denominator).display;
            renderSquare(
                document.getElementById('fraction2-square'), 
                currentProblem.fraction2.numerator, 
                currentProblem.fraction2.denominator
            );

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            updateAnswerDisplay();

            // –°–∫—Ä—ã—Ç–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            document.getElementById('check-section').style.display = 'block';
            document.getElementById('result-section').style.display = 'none';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateAnswerDisplay() {
            if (!currentProblem) return;

            const answerDisplay = document.getElementById('answer-display');
            
            if (userAnswer.length === currentProblem.result.denominator) {
                answerDisplay.innerHTML = `<span class="user-answer">${simplifyFraction(userAnswer.length, currentProblem.result.denominator).display}</span>`;
            } else {
                answerDisplay.innerHTML = `<span class="user-answer">${userAnswer.length}</span>/${currentProblem.result.denominator}`;
            }

            renderSquare(
                document.getElementById('answer-square'), 
                0, 
                currentProblem.result.denominator, 
                true, 
                userAnswer
            );
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
        function checkAnswer() {
            if (!currentProblem) return;
            
            const correct = userAnswer.length === currentProblem.result.numerator;
            totalProblems++;
            
            if (correct) {
                score++;
                document.getElementById('result-text').textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!';
                document.getElementById('result-text').className = 'result correct';
            } else {
                const correctAnswer = simplifyFraction(currentProblem.result.numerator, currentProblem.result.denominator).display;
                document.getElementById('result-text').textContent = `‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}`;
                document.getElementById('result-text').className = 'result incorrect';
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç–∞
            document.getElementById('score').textContent = score;
            document.getElementById('total').textContent = totalProblems;
            
            // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            document.getElementById('check-section').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';
        }

        // –°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä
        function nextProblem() {
            generateProblem();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        document.addEventListener('DOMContentLoaded', function() {
            generateProblem();
        });
    </script>
</body>
</html>